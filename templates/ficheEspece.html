<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>{{taxon.lb_nom}}</title>

        <!-- Jquery -->
        <link rel="stylesheet" href="{{url_for('static', filename='/lib/jquery-ui.css') }}" />
        <script type=text/javascript src="{{url_for('static', filename='/lib/jquery-1.12.4.min.js') }}"></script>
        <script type=text/javascript src="{{url_for('static', filename='lib/jquery-ui.min.js') }}"></script>

        <!-- Bootrap -->
        <link rel="stylesheet" href="{{url_for('static', filename='/lib/bootstrap/css/bootstrap.min.css') }}"></link>
        <link rel="stylesheet" href="{{url_for('static', filename='/lib/bootstrap-switch/css/bootstrap-switch.min.css') }}"></link>
        <script type=text/javascript src="{{url_for('static', filename='lib/bootstrap/js/bootstrap.min.js') }}"></script>

        <link rel="stylesheet" href="{{url_for('static', filename='/lib/node_modules/bootstrap-slider/dist/css/bootstrap-slider.min.css') }}" />
        <script src="{{url_for('static', filename='/lib/node_modules/bootstrap-slider/dist/bootstrap-slider.min.js') }}"></script>


        <script type=text/javascript src="{{url_for('static', filename='/lib/bootstrap-switch/js/bootstrap-switch.js') }}"></script>
        <link rel="stylesheet" href="{{url_for('static', filename='/lib/bootstrap-switch/css/bootstrap-switch.min.css') }}" />


        <!-- Leaflet -->
        <link rel="stylesheet" href="{{url_for('static', filename='/lib/leaflet/leaflet.css') }}" />
        <script src="{{url_for('static', filename='/lib/leaflet/leaflet.js') }}"></script>
        <script src="{{url_for('static', filename='/lib/leaflet/leafletMarkerCluster.js') }}"></script>
        <link rel="stylesheet" href="{{url_for('static', filename='/lib/leaflet/leafletMarkerCluster.css') }}" />
        <script src="{{url_for('static', filename='lib/leaflet/leaflet-fullscreen/leafletFullScreen.min.js') }}"></script>
        <link rel="stylesheet" href="{{url_for('static', filename='lib/leaflet/leaflet-fullscreen/leafletFullScreen.css') }}" />

        <!-- D3 -->
        <script src="{{url_for('static', filename='/lib/d3/d3.min.js') }}"></script>

        <!-- MorrisJs -->
        <script src="{{url_for('static', filename='lib/morrisJs/morris.min.js') }}"></script>
        <link rel="stylesheet" href="{{url_for('static', filename='lib/morrisJs/morris.css') }}" />
        <!-- RaphaelJs -->
        <script src="{{url_for('static', filename='lib/raphaelJs/raphael.min.js') }}"></script>

        <link rel="stylesheet" href="{{url_for('static', filename='/css/ficheEspece.css') }}" />

    </head>

    <body>
    {% include 'navbar.html' %}


    <div id ="page" class="container-fluid">
        <div class='row boxShadow' id="presentationEspece">
            
                    <div class="col-sm-2" > 
                        <img src="{{url_for('static', filename='/images/pne.jpg') }}" style="width:200px;height:200px;">
                    </div>
                    <div class="col-sm-5">
                    
                        <h3> {{taxon.nom_complet_html|safe}} </h3>
                        {% if not taxon.nom_vern == None %}
                        <p>  {{taxon.nom_vern}}  <br/>
                        {% endif %}


<!--                         Classe: <i> {{taxon.classe}} </i> <span class="glyphicon glyphicon-chevron-right"></span>  Ordre: <i>{{taxon.ordre}} </i> <span class="glyphicon glyphicon-chevron-right"></span> Famille:  <i>{{taxon.famille}}</i> </br>
                        Nombre d'observation(s) sur le parc: {{observations.features|length}}</br> -->

                        {% for taxon in taxonomyHierarchy %}

                            {{taxon.rang}} :
                            {% if ( 'ES' in taxon.rang or 'SSES' in taxon.rang) %}
                            <a href = "{{url_for('main.ficheEspece', cd_ref = taxon.cd_ref) }}"> {{taxon.lb_nom}}</a>
                            {% else %}
                             <a href = "{{url_for('main.ficheRangTaxonomie', cd_ref = taxon.cd_ref) }}">{{taxon.lb_nom}} </a>

                            {% endif %}
                        
                        {% endfor %}



                        </br> <a href='https://inpn.mnhn.fr/espece/cd_nom/{{taxon.cd_ref}}' target="_blank">Fiche INPN</a>
                    </div>   
       </div>


        <div id="mapRow" class="row">
            <div id='mapContainer' class="row col-sm-7 boxShadow">
                <div id="map"> </div>
            </div>
            <div id="graphContainer" class="row col-sm-5 boxShadow">
                <h3 class="text-primary text-center"> Observations par classes d'altitudes </h3>
                <div id="altiChart" style="height: 200px;"></div>
                <h3 class="text-primary text-center"> Observations mensuelles </h3>
                <div id="phenologyChart" style="height: 200px;"> </div>
          </div>

        </div>

        <div id="mapOptions" class="row">

            <div class="col-sm-5" > <p> <span id="yearMin"> </span> <input id="slider" type="text" class="span2"/> <span id="yearMax">  </span>  </p>
                <p id="nbObs"> Nombre d'observation(s): {{observations.features|length}}</p>
             </div>
            <div class="col-sm-2" > <input type="checkbox" name="my-checkbox" id="checkbox" checked  data-on-text="Cluster"data-off-text="Point" data-size="mini" size="35"> </div>


        </div>


<div class="container">
  <h4>Autres informations</h4>
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#communes">Communes</a></li>
    <li><a data-toggle="tab" href="#synonymes">Synonymes</a></li>
    <li><a data-toggle="tab" href="#menu3">Observateurs</a></li>
  </ul>

  <div class="tab-content">
    <div id="communes" class="tab-pane fade in active">
                 <p>
                        {% for com in communes %}
                        <a href = "{{url_for('main.ficheCommune', insee = com.insee) }}"> {{com.commune_maj}} {{com.insee}} </a>
                        {% if not loop.last %}
                        ,
                        {% endif %}
                        {% endfor %}
                        </p>    </div>
    <div id="synonymes" class="tab-pane fade">
      {%for syn in synonyme %}
            <span> 
                {% if not syn.lb_nom == taxon.lb_nom %}
                {{syn.lb_nom}}
                {% endif %}
                {% if ( (not loop.last) and (not syn.lb_nom == taxon.lb_nom) ) %}
                ,
                {% endif %}
             </span>
        {% endfor %}
    </div>
    <div id="menu3" class="tab-pane fade">
      <p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
    </div>
  </div>
</div>



      

    
    <script type="text/javascript" src="/atlas/static/conf/calculCustom.js"></script>

    <script type="text/javascript" src="/atlas/static/conf/custom.js"></script>

    <script> 
             var dataset = {{altitudes|tojson}},
                 months = {{months|tojson}}
                 observations = {{observations|tojson}},
                 listeTaxonsSearch = {{listeTaxonsSearch|tojson}},
                 communesSearch = {{communesSearch|tojson}};
    </script>  

    <script type="text/javascript" src="/atlas/static/chart.js"></script>

   <script > var taxonYearMin = {{taxon.yearmin}};</script> 

    <script src="{{url_for('static', filename='map.js') }}"></script>
    <script src="{{url_for('static', filename='main.js') }}"></script>

    </body>
</html>